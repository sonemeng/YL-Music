# 侧栏功能开发规范

## 📋 目的
确保侧栏中所有导航项目的一致性，避免在收起/展开状态下出现显示不一致的问题。

## 🎯 统一规范

### 1. HTML结构规范
所有侧栏导航项必须遵循以下HTML结构：

```html
<li>
    <a href="#" class="nav-link" title="功能名称" data-view="view-name">
        <i class="fas fa-icon-name"></i>
        <span class="sidebar-text">功能名称</span>
    </a>
</li>
```

### 2. 必需属性
- `class="nav-link"`: 基础样式类
- `title="功能名称"`: 用于收起状态下的悬浮提示
- `<i class="fas fa-icon">`: FontAwesome图标
- `<span class="sidebar-text">`: 文字内容，必须包含此类名

### 3. 可选属性
- `id="unique-id"`: 如果需要JavaScript操作
- `data-view="view-name"`: 如果对应特定视图
- `href="#"`: 默认链接

## 🔧 使用统一函数

为确保一致性，添加新的侧栏功能时必须使用 `createSidebarNavItem()` 函数：

```javascript
const newItem = createSidebarNavItem({
    id: 'newFeatureBtn',           // 可选：元素ID
    icon: 'fas fa-star',           // 必需：图标类名
    text: '新功能',                // 必需：显示文字
    title: '这是一个新功能',        // 可选：悬浮提示（默认与text相同）
    href: '#',                     // 可选：链接（默认为'#'）
    dataView: 'new-feature-view',  // 可选：data-view属性
    className: 'special-nav',      // 可选：额外CSS类名
    onClick: (e) => {              // 可选：点击事件处理
        e.preventDefault();
        // 处理点击事件
    }
});

// 添加到导航列表
document.querySelector('.sidebar nav ul').appendChild(newItem);
```

## ✅ 检查清单

添加新侧栏功能时，请确保：

- [ ] 使用了 `createSidebarNavItem()` 函数
- [ ] 包含了合适的FontAwesome图标
- [ ] 设置了 `title` 属性用于悬浮提示
- [ ] 文字部分使用了 `sidebar-text` 类名
- [ ] 在桌面和收起状态下都测试了显示效果
- [ ] 悬浮提示在收起状态下正常显示

## 🎨 样式说明

### 展开状态 (240px宽度)
- 显示图标和文字
- 图标和文字之间有15px间距
- 完整的交互效果

### 收起状态 (60px宽度)
- 只显示图标，居中对齐
- 文字通过CSS隐藏 (`sidebar-text` 类)
- 悬浮时显示文字提示框
- 提示框有阴影和模糊背景

## 🔮 未来扩展

如果需要添加新的侧栏功能，比如：
- 电台功能
- 下载管理
- 设置页面
- 帮助文档

都应该遵循这个规范，使用统一的创建函数，确保用户体验的一致性。

## 🐛 常见问题

### 问题1：收起状态下显示文字而不是图标
**原因**：没有使用 `sidebar-text` 类名包装文字
**解决**：确保文字部分使用 `<span class="sidebar-text">文字</span>`

### 问题2：悬浮提示不显示
**原因**：没有设置 `title` 属性
**解决**：为 `<a>` 标签添加 `title="功能名称"` 属性

### 问题3：样式不一致
**原因**：没有使用统一的HTML结构
**解决**：使用 `createSidebarNavItem()` 函数创建项目